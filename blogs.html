<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Blogs · Typewriter Tales</title>
"/>
<style>
.blogs-header{max-width:700px;margin:0 auto;padding:64px 24px 48px;border-bottom:1px solid #e0d9ce}
.blogs-header h1{font-family:'Special Elite',serif;font-size:2.2rem;margin-bottom:10px}
.blogs-header p{font-size:.82rem;color:#999;letter-spacing:.04em}
.post-list{max-width:700px;margin:0 auto;padding:0 24px 80px}
.post-item{display:block;padding:36px 0;border-bottom:1px solid #e8e2d8;text-decoration:none;color:inherit;transition:padding-left .2s;cursor:pointer}
.post-item:hover{padding-left:8px}
.post-meta{font-size:.72rem;letter-spacing:.1em;color:#bbb;margin-bottom:10px;text-transform:uppercase}
.post-title{font-family:'Special Elite',serif;font-size:1.4rem;color:#2c2c2c;margin-bottom:10px;line-height:1.3}
.post-preview{font-size:.85rem;color:#888;line-height:1.75}
.post-read-more{display:inline-block;margin-top:14px;font-size:.75rem;letter-spacing:.1em;color:#aaa;border-bottom:1px solid #ddd;transition:color .2s,border-color .2s}
.post-item:hover .post-read-more{color:#2c2c2c;border-color:#2c2c2c}
.loading-msg{text-align:center;padding:80px 24px;font-size:.85rem;color:#bbb;letter-spacing:.06em}

/* full post overlay */
.post-overlay{display:none;position:fixed;inset:0;background:#f5f0e8;z-index:500;overflow-y:auto;padding:52px 24px 80px}
.post-overlay.open{display:block}
.overlay-inner{max-width:680px;margin:0 auto}
.overlay-back{display:inline-block;font-size:.75rem;letter-spacing:.1em;color:#bbb;text-decoration:none;cursor:pointer;margin-bottom:48px;transition:color .2s;background:none;border:none;font-family:'Courier Prime',monospace}
.overlay-back:hover{color:#2c2c2c}
.overlay-date{font-size:.72rem;letter-spacing:.14em;color:#bbb;text-transform:uppercase;margin-bottom:14px}
.overlay-title{font-family:'Special Elite',serif;font-size:clamp(1.8rem,4vw,2.6rem);line-height:1.2;color:#2c2c2c;margin-bottom:48px;padding-bottom:32px;border-bottom:1px solid #e0d9ce}
.overlay-paper{background:#fdfaf3;border:1px solid #e8e2d8;padding:52px 48px 52px 80px;position:relative;background-image:linear-gradient(#fdfaf3 0px,#fdfaf3 27px,#e0d9ce 27px,#e0d9ce 28px);background-size:100% 28px}
.overlay-paper::before{content:'';position:absolute;top:0;bottom:0;left:56px;width:1px;background:#f0c0b8;opacity:.6}
.overlay-body{font-family:'Courier Prime',monospace;font-size:.98rem;line-height:28px;color:#2c2c2c;white-space:pre-wrap;word-break:break-word;padding-left:8px}
.tw-cursor{display:inline-block;width:9px;height:1em;background:#2c2c2c;vertical-align:text-bottom;margin-left:1px;animation:blink .75s step-end infinite}
@keyframes blink{0%,100%{opacity:1}50%{opacity:0}}
</style>
</head>
<body>

<nav>
  <a href="index.html" class="nav-logo">Typewriter Tales</a>
  <ul class="nav-links">
    ><a href="index.html">home</a></li>
    ><a href="blogs.html" class="active">blogs</a></li>
    ><a href="typewriter.html">experience</a></li>
  </ul>
</nav>

<div class="page-wrapper">
  <div class="blogs-header">
    <h1>The Blog</h1>
    <p>short stories · personal experiences · little moments worth remembering</p>
  </div>
  <div class="post-list" id="post-list">
    <p class="loading-msg" id="loading-msg">loading posts...</p>
  </div>
</div>

<footer>&copy; 2026 · Typewriter Tales · made with patience and coffee</footer>

<!-- Full post overlay -->
<div class="post-overlay" id="post-overlay">
  <div class="overlay-inner">
    <button class="overlay-back" id="overlay-back">← back to all posts</button>
    <p class="overlay-date" id="overlay-date"></p>
    <h1 class="overlay-title" id="overlay-title"></h1>
    <div class="overlay-paper">
      <div class="overlay-body" id="overlay-body"><span class="tw-cursor" id="tw-cursor"></span></div>
    </div>
  </div>
</div>

<script type="module">
import{initializeApp}from"https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
import{getFirestore,collection,getDocs,orderBy,query}from"https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js";
const firebaseConfig={
  apiKey:"AIzaSyBPnZ8f4cek3JcIwfopsmxnCAGTXoH--yc",
  authDomain:"typewritertales-5bdda.firebaseapp.com",
  projectId:"typewritertales-5bdda",
  storageBucket:"typewritertales-5bdda.firebasestorage.app",
  messagingSenderId:"631041179526",
  appId:"1:631041179526:web:7d2fea0e3a5b48ce567607"
};
const app=initializeApp(firebaseConfig);
const db=getFirestore(app);
const postList=document.getElementById("post-list");
const loadingMsg=document.getElementById("loading-msg");
const overlay=document.getElementById("post-overlay");
const overlayBack=document.getElementById("overlay-back");
const overlayDate=document.getElementById("overlay-date");
const overlayTitle=document.getElementById("overlay-title");
const overlayBody=document.getElementById("overlay-body");
const twCursor=document.getElementById("tw-cursor");

function formatDate(ts){
  if(!ts)return"";
  const d=ts.toDate();
  return d.toLocaleDateString("en-IN",{day:"numeric",month:"long",year:"numeric"});
}

function escHtml(s){
  return String(s).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");
}

let typeTimer=null;
function typeText(text){
  while(overlayBody.firstChild!==twCursor)overlayBody.removeChild(overlayBody.firstChild);
  if(typeTimer)clearTimeout(typeTimer);
  let i=0;
  function tick(){
    if(i<text.length){
      twCursor.insertAdjacentText("beforebegin",text.charAt(i));
      i++;
      typeTimer=setTimeout(tick,22);
    }
  }
  tick();
}

function openPost(post){
  overlayDate.textContent=formatDate(post.createdAt);
  overlayTitle.textContent=post.title;
  overlay.classList.add("open");
  document.body.style.overflow="hidden";
  typeText(post.body);
}

function closePost(){
  overlay.classList.remove("open");
  document.body.style.overflow="";
  if(typeTimer)clearTimeout(typeTimer);
  while(overlayBody.firstChild!==twCursor)overlayBody.removeChild(overlayBody.firstChild);
}

overlayBack.addEventListener("click",closePost);

async function loadPosts(){
  try{
    const q=query(collection(db,"blogposts"),orderBy("createdAt","desc"));
    const snap=await getDocs(q);
    if(snap.empty){
      loadingMsg.textContent="no posts yet. check back soon.";
      return;
    }
    loadingMsg.remove();
    snap.forEach(doc=>{
      const d=doc.data();
      const item=document.createElement("div");
      item.className="post-item";
      const preview=d.body?d.body.slice(0,120).replace(/\n/g," ")+"...":"";
      item.innerHTML=`
        <p class="post-meta">${formatDate(d.createdAt)}</p>
        <h2 class="post-title">${escHtml(d.title||"untitled")}</h2>
        <p class="post-preview">${escHtml(preview)}</p>
        <span class="post-read-more">read more →</span>`;
      item.addEventListener("click",()=>openPost(d));
      postList.appendChild(item);
    });
  }catch(e){
    loadingMsg.textContent="could not load posts. try again later.";
  }
}

loadPosts();
</script>
</body>
</html>
